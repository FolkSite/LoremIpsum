/*  */LoremIpsum.panel.Home = function(config) {    config = config || {};    Ext.apply(config,{        id: 'loremipsum-panel-home'        ,url: LoremIpsum.config.connectorUrl        ,baseParams: {            action: 'mgr/generate'            ,register: 'mgr'            ,topic: '/loremipsum/generate/'        }        ,border: false        ,baseCls: 'modx-formpanel'        ,fileUpload: true        ,saveMsg: _('loremipsum.generate_msg')        ,items: [{            html: '<h2>'+_('loremipsum.management')+'</h2>'            ,border: false            ,id: 'loremipsum-home-header'            ,cls: 'modx-page-header'        },{            xtype: 'modx-tabs'            ,border: true            ,defaults: { border: false, autoHeight: true }            ,items: [{                title: _('loremipsum.resources')                ,draggable: false                ,layout: 'form'                ,labelWidth: 200                ,bodyStyle: 'padding: 15px;'                ,items: [{                    html: _('loremipsum.resources_desc')                    ,border: false                },{                    xtype: 'textfield'                    ,name: 'number'                    ,fieldLabel: _('loremipsum.number')                    ,description: _('loremipsum.number_desc')                    ,value: '1'                },{                    xtype: 'modx-combo-context'                    ,name: 'context_key'                    ,fieldLabel: _('loremipsum.context_key')                    ,description: _('loremipsum.context_key_desc')                    ,value: 'web'                },{                    xtype: 'modx-combo-template'                    ,name: 'template'                    ,fieldLabel: _('loremipsum.template')                    ,description: _('loremipsum.template_desc')                    ,value: '1'                }]            }]        }]        ,listeners: {            'beforeSubmit': {fn:this.beforeSubmit,scope:this}            ,'failure': {fn:this.failure,scope:this}            ,'success': {fn:this.success,scope:this}        }    });    LoremIpsum.panel.Home.superclass.constructor.call(this,config);};Ext.extend(LoremIpsum.panel.Home, MODx.FormPanel, {    beforeSubmit: function(o) {        console.log('beforeSubmit');        this.loadConsole(Ext.getBody(), '/loremipsum/generate/');        Ext.apply(o.form.baseParams,{            //packages: Ext.getCmp('tp-grid-packages').encode()        });    }    ,failure: function(o) {        console.log('failure');        this.getConsole().fireEvent('complete');    }    ,success: function(o) {        console.log('success');        this.getConsole().fireEvent('complete');        var t = Ext.getCmp('modx-resource-tree');        if (t) { t.refresh(); }    }    ,console: null    ,loadConsole: function(btn,topic) {    	if (this.console === null) {            this.console = MODx.load({               xtype: 'modx-console'               ,register: 'mgr'               ,topic: topic               ,show_filename: 0            });        } else {            this.console.setRegister('mgr', topic);        }        this.console.show(btn);    }    ,getConsole: function() {        return this.console;    }});Ext.reg('loremipsum-panel-home', LoremIpsum.panel.Home);